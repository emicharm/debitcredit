import{f as Ae,a as Se}from"./DA3hL1tu.js";import{aP as fe,y as te,B as ve,aJ as re,C as V,aQ as be,R as we,aR as Ie,aS as Me,aT as ke,w as D,aU as _e,ag as De,aV as Re,aW as Ce,aX as Ve,aY as Le,d as n,aZ as Pe,Q as ue,a_ as Ue,a$ as Oe,b0 as $e,b1 as Ge,aM as qe,b as Be,ae as Fe,aL as I,s as x,a1 as We,h as He,a4 as m,a6 as _,a2 as Xe,a3 as Ye,a5 as E}from"./VUKcktHy.js";import{a as Ze,c as ze,d as pe,n as Ke,b as Qe,e as je,s as Je}from"./B6Nj_s7a.js";import{t as et,c as tt,s as ae,d as at}from"./A8L7exZK.js";function rt(e,t){var a=void 0,r;fe(()=>{a!==(a=t())&&(r&&(te(r),r=null),a&&(r=ve(()=>{re(()=>a(e))})))})}function j(e,t={},a,r){for(var i in a){var l=a[i];t[i]!==l&&(a[i]==null?e.style.removeProperty(i):e.style.setProperty(i,l,r))}}function it(e,t,a,r){var i=e.__style;if(V||i!==t){var l=et(t,r);(!V||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=t}else r&&(Array.isArray(r)?(j(e,a?.[0],r[0]),j(e,a?.[1],r[1],"important")):j(e,a,r));return r}function H(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Ie(t))return Me();for(var r of e.options)r.selected=t.includes(F(r));return}for(r of e.options){var i=F(r);if(ke(i,t)){r.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function ye(e){var t=new MutationObserver(()=>{H(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),we(()=>{t.disconnect()})}function lt(e,t,a=t){var r=new WeakSet,i=!0;be(e,"change",l=>{var d=l?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(d),F);else{var s=e.querySelector(d)??e.querySelector("option:not([disabled])");f=s&&F(s)}a(f),D!==null&&r.add(D)}),re(()=>{var l=t();if(e===document.activeElement){var d=_e??D;if(r.has(d))return}if(H(e,l,i),i&&l===void 0){var f=e.querySelector(":checked");f!==null&&(l=F(f),a(l))}e.__value=l,i=!1}),ye(e)}function F(e){return"__value"in e?e.__value:e.value}const $=Symbol("class"),G=Symbol("style"),ge=Symbol("is custom element"),he=Symbol("is html");function L(e){if(V){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;X(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;X(e,"checked",null),e.checked=i}}};e.__on_r=a,De(a),Re()}}function st(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function X(e,t,a,r){var i=me(e);V&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=a)&&(t==="loading"&&(e[Ce]=a),a==null?e.removeAttribute(t):typeof a!="string"&&Ee(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function nt(e,t,a,r,i=!1,l=!1){if(V&&i&&e.tagName==="INPUT"){var d=e,f=d.type==="checkbox"?"defaultChecked":"defaultValue";f in a||L(d)}var s=me(e),c=s[ge],A=!s[he];let S=V&&c;S&&ue(!1);var v=t||{},w=e.tagName==="OPTION";for(var T in t)T in a||(a[T]=null);a.class?a.class=tt(a.class):a[$]&&(a.class=null),a[G]&&(a.style??=null);var M=Ee(e);for(const o in a){let u=a[o];if(w&&o==="value"&&u==null){e.value=e.__value="",v[o]=u;continue}if(o==="class"){var k=e.namespaceURI==="http://www.w3.org/1999/xhtml";ae(e,k,u,r,t?.[$],a[$]),v[o]=u,v[$]=a[$];continue}if(o==="style"){it(e,u,t?.[G],a[G]),v[o]=u,v[G]=a[G];continue}var y=v[o];if(!(u===y&&!(u===void 0&&e.hasAttribute(o)))){v[o]=u;var P=o[0]+o[1];if(P!=="$$")if(P==="on"){const g={},N="$$"+o;let b=o.slice(2);var R=Qe(b);if(Ze(b)&&(b=b.slice(0,-7),g.capture=!0),!R&&y){if(u!=null)continue;e.removeEventListener(b,v[N],g),v[N]=null}if(u!=null)if(R)e[`__${b}`]=u,pe([b]);else{let W=function(O){v[o].call(this,O)};v[N]=ze(b,e,W,g)}else R&&(e[`__${b}`]=void 0)}else if(o==="style")X(e,o,u);else if(o==="autofocus")Ue(e,!!u);else if(!c&&(o==="__value"||o==="value"&&u!=null))e.value=e.__value=u;else if(o==="selected"&&w)st(e,u);else{var p=o;A||(p=Ke(p));var U=p==="defaultValue"||p==="defaultChecked";if(u==null&&!c&&!U)if(s[o]=null,p==="value"||p==="checked"){let g=e;const N=t===void 0;if(p==="value"){let b=g.defaultValue;g.removeAttribute(p),g.defaultValue=b,g.value=g.__value=N?b:null}else{let b=g.defaultChecked;g.removeAttribute(p),g.defaultChecked=b,g.checked=N?b:!1}}else e.removeAttribute(o);else U||M.includes(p)&&(c||typeof u!="string")?(e[p]=u,p in s&&(s[p]=Oe)):typeof u!="function"&&X(e,p,u)}}}return S&&ue(!0),v}function xt(e,t,a=[],r=[],i=[],l,d=!1,f=!1){Le(i,a,r,s=>{var c=void 0,A={},S=e.nodeName==="SELECT",v=!1;if(fe(()=>{var T=t(...s.map(n)),M=nt(e,c,T,l,d,f);v&&S&&"value"in T&&H(e,T.value);for(let y of Object.getOwnPropertySymbols(A))T[y]||te(A[y]);for(let y of Object.getOwnPropertySymbols(T)){var k=T[y];y.description===Pe&&(!c||k!==c[y])&&(A[y]&&te(A[y]),A[y]=ve(()=>rt(e,()=>k))),M[y]=k}c=M}),S){var w=e;re(()=>{H(w,c.value,!0),ye(w)})}v=!0})}function me(e){return e.__attributes??={[ge]:e.nodeName.includes("-"),[he]:e.namespaceURI===Ve}}var ce=new Map;function Ee(e){var t=e.getAttribute("is")||e.nodeName,a=ce.get(t);if(a)return a;ce.set(t,a=[]);for(var r,i=e,l=Element.prototype;l!==i;){r=Ge(i);for(var d in r)r[d].set&&a.push(d);i=$e(i)}return a}function q(e,t,a=t){var r=new WeakSet;be(e,"input",async i=>{var l=i?e.defaultValue:e.value;if(l=J(e)?ee(l):l,a(l),D!==null&&r.add(D),await qe(),l!==(l=t())){var d=e.selectionStart,f=e.selectionEnd,s=e.value.length;if(e.value=l??"",f!==null){var c=e.value.length;d===f&&f===s&&c>s?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=d,e.selectionEnd=Math.min(f,c))}}}),(V&&e.defaultValue!==e.value||Be(t)==null&&e.value)&&(a(J(e)?ee(e.value):e.value),D!==null&&r.add(D)),Fe(()=>{var i=t();if(e===document.activeElement){var l=_e??D;if(r.has(l))return}J(e)&&i===ee(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function J(e){var t=e.type;return t==="number"||t==="range"}function ee(e){return e===""?null:+e}class ot{#e=I("transactions");get currentView(){return n(this.#e)}set currentView(t){x(this.#e,t,!0)}navigateTo(t){this.currentView=t}}const ut=new ot,Te="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Y=32,ct=16,xe=10,de=0xffffffffffff;var C;(function(e){e.Base32IncorrectEncoding="B32_ENC_INVALID",e.DecodeTimeInvalidCharacter="DEC_TIME_CHAR",e.DecodeTimeValueMalformed="DEC_TIME_MALFORMED",e.EncodeTimeNegative="ENC_TIME_NEG",e.EncodeTimeSizeExceeded="ENC_TIME_SIZE_EXCEED",e.EncodeTimeValueMalformed="ENC_TIME_MALFORMED",e.PRNGDetectFailure="PRNG_DETECT",e.ULIDInvalid="ULID_INVALID",e.Unexpected="UNEXPECTED",e.UUIDInvalid="UUID_INVALID"})(C||(C={}));class B extends Error{constructor(t,a){super(`${a} (${t})`),this.name="ULIDError",this.code=t}}function dt(e){const t=Math.floor(e()*Y)%Y;return Te.charAt(t)}function ft(e){const t=vt(),a=t&&(t.crypto||t.msCrypto)||null;if(typeof a?.getRandomValues=="function")return()=>{const r=new Uint8Array(1);return a.getRandomValues(r),r[0]/256};if(typeof a?.randomBytes=="function")return()=>a.randomBytes(1).readUInt8()/256;throw new B(C.PRNGDetectFailure,"Failed to find a reliable PRNG")}function vt(){return pt()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function bt(e,t){let a="";for(;e>0;e--)a=dt(t)+a;return a}function _t(e,t=xe){if(isNaN(e))throw new B(C.EncodeTimeValueMalformed,`Time must be a number: ${e}`);if(e>de)throw new B(C.EncodeTimeSizeExceeded,`Cannot encode a time larger than ${de}: ${e}`);if(e<0)throw new B(C.EncodeTimeNegative,`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new B(C.EncodeTimeValueMalformed,`Time must be an integer: ${e}`);let a,r="";for(let i=t;i>0;i--)a=e%Y,r=Te.charAt(a)+r,e=(e-a)/Y;return r}function pt(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function yt(e,t){const a=ft(),r=Date.now();return _t(r,xe)+bt(ct,a)}var gt=Ae('<div class="p-4"><h1 class="text-2xl font-bold mb-6">Create Transaction</h1> <form class="space-y-4"><div class="flex flex-col gap-2"><label for="date" class="text-sm text-neutral-400">Date</label> <input id="date" type="date" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="description" class="text-sm text-neutral-400">Description</label> <input id="description" type="text" placeholder="Enter description" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="account" class="text-sm text-neutral-400">Account</label> <input id="account" type="text" placeholder="Enter account" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex gap-2"><div class="flex-1 flex flex-col gap-2"><label for="amount" class="text-sm text-neutral-400">Amount</label> <input id="amount" type="number" step="0.01" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="currency" class="text-sm text-neutral-400">Currency</label> <select id="currency" class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"><option>EUR</option><option>USD</option><option>RUB</option><option>ARS</option></select></div></div> <div class="flex flex-col gap-2"><label for="category" class="text-sm text-neutral-400">Category</label> <input id="category" type="text" placeholder="Enter category" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label class="text-sm text-neutral-400">Transaction Type</label> <div class="flex gap-2"><button type="button">Debit (-)</button> <button type="button">Credit (+)</button></div></div> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-neutral-700 disabled:cursor-not-allowed text-white font-medium py-3 rounded-lg transition-colors"> </button></form></div>');function Nt(e,t){We(t,!0);let a=I(He(new Date().toISOString().split("T")[0])),r=I(""),i=I(0),l=I("EUR"),d=I(""),f=I(""),s=I("debit"),c=I(!1);async function A(h){h.preventDefault(),x(c,!0);try{const Q={id:yt(),date:new Date(n(a)),description:n(r),amount:n(i),currency:n(l),account:n(d),category:n(f),kind:n(s)};await at.transactions.add(Q),ut.navigateTo("transactions")}catch(Q){console.error("Failed to create transaction:",Q),alert("Failed to create transaction")}finally{x(c,!1)}}var S=gt(),v=_(m(S),2),w=m(v),T=_(m(w),2);L(T),E(w);var M=_(w,2),k=_(m(M),2);L(k),E(M);var y=_(M,2),P=_(m(y),2);L(P),E(y);var R=_(y,2),p=m(R),U=_(m(p),2);L(U),E(p);var o=_(p,2),u=_(m(o),2),g=m(u);g.value=g.__value="EUR";var N=_(g);N.value=N.__value="USD";var b=_(N);b.value=b.__value="RUB";var W=_(b);W.value=W.__value="ARS",E(u),E(o),E(R);var O=_(R,2),ie=_(m(O),2);L(ie),E(O);var Z=_(O,2),le=_(m(Z),2),z=m(le);z.__click=()=>x(s,"debit");let se;var ne=_(z,2);ne.__click=()=>x(s,"credit");let oe;E(le),E(Z);var K=_(Z,2),Ne=m(K,!0);E(K),E(v),E(S),Xe(()=>{se=ae(z,1,"flex-1 py-2 px-4 rounded-lg border transition-all",null,se,{"bg-red-600":n(s)==="debit","border-red-600":n(s)==="debit","text-white":n(s)==="debit","bg-neutral-800":n(s)!=="debit","border-neutral-700":n(s)!=="debit","text-neutral-400":n(s)!=="debit"}),oe=ae(ne,1,"flex-1 py-2 px-4 rounded-lg border transition-all",null,oe,{"bg-green-600":n(s)==="credit","border-green-600":n(s)==="credit","text-white":n(s)==="credit","bg-neutral-800":n(s)!=="credit","border-neutral-700":n(s)!=="credit","text-neutral-400":n(s)!=="credit"}),K.disabled=n(c),Je(Ne,n(c)?"Creating...":"Create Transaction")}),je("submit",v,A),q(T,()=>n(a),h=>x(a,h)),q(k,()=>n(r),h=>x(r,h)),q(P,()=>n(d),h=>x(d,h)),q(U,()=>n(i),h=>x(i,h)),lt(u,()=>n(l),h=>x(l,h)),q(ie,()=>n(f),h=>x(f,h)),Se(e,S),Ye()}pe(["click"]);export{Nt as _,xt as a,ut as n};
