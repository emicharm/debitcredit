import{g as ne,f as le,o as oe,a as ie}from"./C3JrJLfx.js";import{aB as se,b0 as ce,b as de,a8 as ue,C as be,w as x,aF as fe,a$ as v,d as t,s as b,a0 as ve,h as pe,a4 as d,a6 as n,a2 as me,a3 as _e,a5 as u}from"./CiQ3Fy3v.js";import{s as xe}from"./B1pOBs5o.js";import{b as ge,r as g}from"./DXqtqhe3.js";import{s as Y}from"./DEE5Eib0.js";import{d as ye}from"./BgcIGmvB.js";function y(e,a,r=a){var o=new WeakSet;se(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=B(e)?$(s):s,r(s),x!==null&&o.add(x),await ce(),s!==(s=a())){var _=e.selectionStart,p=e.selectionEnd,l=e.value.length;if(e.value=s??"",p!==null){var f=e.value.length;_===p&&p===l&&f>l?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=_,e.selectionEnd=Math.min(p,f))}}}),(be&&e.defaultValue!==e.value||de(a)==null&&e.value)&&(r(B(e)?$(e.value):e.value),x!==null&&o.add(x)),ue(()=>{var i=a();if(e===document.activeElement){var s=fe??x;if(o.has(s))return}B(e)&&i===$(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function B(e){var a=e.type;return a==="number"||a==="range"}function $(e){return e===""?null:+e}class Ee{#e=v("transactions");get currentView(){return t(this.#e)}set currentView(a){b(this.#e,a,!0)}navigateTo(a){this.currentView=a}}const he=new Ee,ee="0123456789ABCDEFGHJKMNPQRSTVWXYZ",h=32,Te=16,te=10,j=0xffffffffffff;var m;(function(e){e.Base32IncorrectEncoding="B32_ENC_INVALID",e.DecodeTimeInvalidCharacter="DEC_TIME_CHAR",e.DecodeTimeValueMalformed="DEC_TIME_MALFORMED",e.EncodeTimeNegative="ENC_TIME_NEG",e.EncodeTimeSizeExceeded="ENC_TIME_SIZE_EXCEED",e.EncodeTimeValueMalformed="ENC_TIME_MALFORMED",e.PRNGDetectFailure="PRNG_DETECT",e.ULIDInvalid="ULID_INVALID",e.Unexpected="UNEXPECTED",e.UUIDInvalid="UUID_INVALID"})(m||(m={}));class E extends Error{constructor(a,r){super(`${r} (${a})`),this.name="ULIDError",this.code=a}}function Ne(e){const a=Math.floor(e()*h)%h;return ee.charAt(a)}function we(e){const a=De(),r=a&&(a.crypto||a.msCrypto)||null;if(typeof r?.getRandomValues=="function")return()=>{const o=new Uint8Array(1);return r.getRandomValues(o),o[0]/256};if(typeof r?.randomBytes=="function")return()=>r.randomBytes(1).readUInt8()/256;throw new E(m.PRNGDetectFailure,"Failed to find a reliable PRNG")}function De(){return Me()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function Re(e,a){let r="";for(;e>0;e--)r=Ne(a)+r;return r}function Ie(e,a=te){if(isNaN(e))throw new E(m.EncodeTimeValueMalformed,`Time must be a number: ${e}`);if(e>j)throw new E(m.EncodeTimeSizeExceeded,`Cannot encode a time larger than ${j}: ${e}`);if(e<0)throw new E(m.EncodeTimeNegative,`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new E(m.EncodeTimeValueMalformed,`Time must be an integer: ${e}`);let r,o="";for(let i=a;i>0;i--)r=e%h,o=ee.charAt(r)+o,e=(e-r)/h;return o}function Me(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Se(e,a){const r=we(),o=Date.now();return Ie(o,te)+Re(Te,r)}var Ae=le('<div class="p-4"><h1 class="text-2xl font-bold mb-6">Create Transaction</h1> <form class="space-y-4"><div class="flex flex-col gap-2"><label for="date" class="text-sm text-neutral-400">Date</label> <input id="date" type="date" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="description" class="text-sm text-neutral-400">Description</label> <input id="description" type="text" placeholder="Enter description" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="account" class="text-sm text-neutral-400">Account</label> <input id="account" type="text" placeholder="Enter account" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex gap-2"><div class="flex-1 flex flex-col gap-2"><label for="amount" class="text-sm text-neutral-400">Amount</label> <input id="amount" type="number" step="0.01" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label for="currency" class="text-sm text-neutral-400">Currency</label> <select id="currency" class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"><option>EUR</option><option>USD</option><option>RUB</option><option>ARS</option></select></div></div> <div class="flex flex-col gap-2"><label for="category" class="text-sm text-neutral-400">Category</label> <input id="category" type="text" placeholder="Enter category" required class="bg-neutral-800 text-white px-3 py-2 rounded border border-neutral-700 focus:border-blue-500 outline-none"/></div> <div class="flex flex-col gap-2"><label class="text-sm text-neutral-400">Transaction Type</label> <div class="flex gap-2"><button type="button">Debit (-)</button> <button type="button">Credit (+)</button></div></div> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-neutral-700 disabled:cursor-not-allowed text-white font-medium py-3 rounded-lg transition-colors"> </button></form></div>');function Pe(e,a){ve(a,!0);let r=v(pe(new Date().toISOString().split("T")[0])),o=v(""),i=v(0),s=v("EUR"),_=v(""),p=v(""),l=v("debit"),f=v(!1);async function ae(c){c.preventDefault(),b(f,!0);try{const P={id:Se(),date:new Date(t(r)),description:t(o),amount:t(i),currency:t(s),account:t(_),category:t(p),kind:t(l)};await ye.transactions.add(P),he.navigateTo("transactions")}catch(P){console.error("Failed to create transaction:",P),alert("Failed to create transaction")}finally{b(f,!1)}}var T=Ae(),N=n(d(T),2),w=d(N),L=n(d(w),2);g(L),u(w);var D=n(w,2),O=n(d(D),2);g(O),u(D);var R=n(D,2),W=n(d(R),2);g(W),u(R);var I=n(R,2),M=d(I),q=n(d(M),2);g(q),u(M);var X=n(M,2),S=n(d(X),2),A=d(S);A.value=A.__value="EUR";var C=n(A);C.value=C.__value="USD";var V=n(C);V.value=V.__value="RUB";var z=n(V);z.value=z.__value="ARS",u(S),u(X),u(I);var k=n(I,2),H=n(d(k),2);g(H),u(k);var G=n(k,2),Z=n(d(G),2),U=d(Z);U.__click=()=>b(l,"debit");let J;var K=n(U,2);K.__click=()=>b(l,"credit");let Q;u(Z),u(G);var F=n(G,2),re=d(F,!0);u(F),u(N),u(T),me(()=>{J=Y(U,1,"flex-1 py-2 px-4 rounded-lg border transition-all",null,J,{"bg-red-600":t(l)==="debit","border-red-600":t(l)==="debit","text-white":t(l)==="debit","bg-neutral-800":t(l)!=="debit","border-neutral-700":t(l)!=="debit","text-neutral-400":t(l)!=="debit"}),Q=Y(K,1,"flex-1 py-2 px-4 rounded-lg border transition-all",null,Q,{"bg-green-600":t(l)==="credit","border-green-600":t(l)==="credit","text-white":t(l)==="credit","bg-neutral-800":t(l)!=="credit","border-neutral-700":t(l)!=="credit","text-neutral-400":t(l)!=="credit"}),F.disabled=t(f),xe(re,t(f)?"Creating...":"Create Transaction")}),oe("submit",N,ae),y(L,()=>t(r),c=>b(r,c)),y(O,()=>t(o),c=>b(o,c)),y(W,()=>t(_),c=>b(_,c)),y(q,()=>t(i),c=>b(i,c)),ge(S,()=>t(s),c=>b(s,c)),y(H,()=>t(p),c=>b(p,c)),ie(e,T),_e()}ne(["click"]);export{Pe as _,he as n};
